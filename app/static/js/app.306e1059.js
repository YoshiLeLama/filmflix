(function(t){function e(e){for(var a,s,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,n=1;n<r.length;n++){var l=r[n];0!==i[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},i={app:0},o=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"003f":function(t,e,r){"use strict";r("eaf1")},"034f":function(t,e,r){"use strict";r("85ec")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("p",{staticClass:"fs-1"},[t._v("Filmflix")]),r("FilmList")],1)},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-75 mx-auto m-3"},[r("FilmAddPopup",{attrs:{id:"add-film-popup"},on:{onPost:t.getFilms}}),r("div",[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.showAddMovieModal}},[r("i",{staticClass:"bi bi-plus-circle"}),t._v(" Add movie ")])]),r("ListFilter",{attrs:{director_choices:t.directorChoices,sorting_choices:t.sortingChoices},on:{titleFilterChange:function(e){t.titleFilter=e},directorFilterChange:function(e){t.directorFilter=e},sortingChange:function(e){return t.updateSort(e)}}}),r("div",{staticClass:"row justify-content-center row-cols-1 row-cols-md-5 g-2"},t._l(t.films.filter((function(e){var r=e.title,a=e.director;return-1!==r.toLowerCase().search(t.titleFilter.toLowerCase())&&(0===t.directorFilter.length||a===t.directorFilter)})),(function(t){return r("FilmPreview",{key:t.title,attrs:{id:t.id,"movie-data":t}})})),1)],1)},n=[],l=r("b85c"),c=(r("4e82"),r("d3b7"),r("07ac"),r("bc3a")),d=r.n(c),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col"},[r("FilmDetailsPopup",{attrs:{id:t.id,"movie-data":t.movieData}}),r("div",{staticClass:"card shadow"},[r("img",{staticClass:"card-img-top",attrs:{alt:"Banner",src:t.movieData.movie_banner}}),r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.movieData.title))]),r("p",{staticClass:"fs-6"},[t._v(t._s(t.movieData.director)+" Â· "+t._s(t.movieData.release_date))]),r("a",{staticClass:"btn btn-primary position-relative",on:{click:function(e){return t.modal.show()}}},[t._v("View more details ")])]),r("div",{staticClass:"card-footer text-muted"},[r("p",{staticClass:"fs-6 m-0"},[t._v("Rating : "),r("StarRating",{attrs:{max_stars:5,rating:parseInt(t.movieData.rt_score)}})],1)])])],1)},m=[],f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal fade"},[r("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[r("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v(t._s(t.movieData.title)+" "),r("span",{staticClass:"badge rounded-pill bg-secondary align-baseline"},[t._v(t._s(t.movieData.release_date))])]),r("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),r("div",{staticClass:"modal-body",on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[r("p",{staticClass:"fs-6 text-start"},[t._v(t._s(t.movieData.original_title))]),r("StarRating",{staticClass:"position-absolute top-0 end-0 m-3",attrs:{rating:parseInt(t.movieData.rt_score),max_stars:5}}),r("img",{staticClass:"w-100 rounded",attrs:{alt:"Film image",src:t.movieData.image}}),r("p",{staticClass:"fs-4 mt-3 fw-bold text-start"},[t._v(t._s(t.movieData.director))]),r("p",{staticClass:"fs-6 m-4"},[t._v(t._s(t.movieData.description))])],1),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){t.scrolled=!1}}},[t._v("Close")])])])])])},p=[],v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{attrs:{title:t.rating.toString().concat("/100")}},[t._l(Math.floor(t.rating/(100/t.max_stars)),(function(t){return r("i",{key:t,staticClass:"bi bi-star-fill"})})),t.rating/t.max_stars-Math.floor(t.rating/t.max_stars)<50/t.max_stars&&t.rating%100?r("i",{staticClass:"bi bi-star-half"}):t._e(),t._l(Math.floor((100-t.rating)/(100/t.max_stars)),(function(t){return r("i",{key:t+5,staticClass:"bi bi-star"})}))],2)},_=[],C=(r("a9e3"),{name:"StarRating",props:{rating:Number,max_stars:Number}}),h=C,b=r("2877"),g=Object(b["a"])(h,v,_,!1,null,"556ba7a4",null),y=g.exports,F={name:"FilmDetailsPopup",components:{StarRating:y},data:function(){return{scrolled:!1}},props:{movieData:Object},computed:{toHours:function(t){var e=Math.floor(t/60),r=t%60;return e+"h"+r}}},w=F,E=(r("003f"),Object(b["a"])(w,f,p,!1,null,"54ba4ff8",null)),D=E.exports,x=r("7b17"),A={name:"FilmPreview",components:{StarRating:y,FilmDetailsPopup:D},data:function(){return{showDetails:!1,modal:null}},props:{id:String,movieData:Object},mounted:function(){this.updateModal()},updated:function(){this.updateModal()},methods:{updateModal:function(){this.modal=new x["a"](document.getElementById(this.id))}}},S=A,I=Object(b["a"])(S,u,m,!1,null,"65f7805c",null),O=I.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"d-flex flex-row-reverse p-3",attrs:{action:"#"}},[r("div",{staticClass:"col-auto ms-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control position-relative end-0",attrs:{type:"text",id:"inputTitle",placeholder:"Filter titles"},domProps:{value:t.titleFilter},on:{input:[function(e){e.target.composing||(t.titleFilter=e.target.value)},function(e){return t.$emit("titleFilterChange",t.titleFilter)}]}})]),r("div",{staticClass:"col-auto ms-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.directorChoice,expression:"directorChoice"}],staticClass:"form-select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.directorChoice=e.target.multiple?r:r[0]},function(e){return t.$emit("directorFilterChange",t.directorChoice)}]}},[r("option",{attrs:{value:""}},[t._v("Filter by director...")]),t._l(t.director_choices,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]),r("div",{staticClass:"col-auto ms-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.sortingChoice,expression:"sortingChoice"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortingChoice=e.target.multiple?r:r[0]},function(e){return t.$emit("sortingChange",t.sortingChoice)}]}},[r("option",{attrs:{value:""}},[t._v("Sort by...")]),t._l(t.sorting_choices,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])])},M=[],P={name:"ListFilter",data:function(){return{titleFilter:"",directorChoice:"",sortingChoice:""}},props:{director_choices:Array,sorting_choices:Array},emits:["titleFilterChange","directorFilterChange","sortingChange"]},j=P,$=Object(b["a"])(j,T,M,!1,null,"8537877c",null),R=$.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal fade"},[r("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[r("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v("Add Movie")]),r("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),r("div",{staticClass:"modal-body",on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[t.confirmSuccess?r("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" The movie has been successfully added. ")]):t._e(),r("form",{attrs:{id:"addFilmForm"}},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.postNewFilm.apply(null,arguments)}}},[t._v("Add Movie")])])])])])])])},N=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"titleControlInput"}},[t._v("Title")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"titleControlInput",name:"title",placeholder:"Enter movie title",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"originalTitleControlInput"}},[t._v("Original title")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"originalTitleControlInput",name:"original_title",placeholder:"Enter movie original title",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"directorControlInput"}},[t._v("Director")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"directorControlInput",name:"director",placeholder:"Enter director's name",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"descriptionControlTextArea"}},[t._v("Description")]),r("textarea",{staticClass:"form-control",attrs:{id:"descriptionControlTextArea",rows:"3",placeholder:"Enter movie description",name:"description",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"imageControlInput"}},[t._v("Movie poster")]),r("input",{staticClass:"form-control",attrs:{type:"url",id:"imageControlInput",name:"image",placeholder:"Image URL",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"bannerControlInput"}},[t._v("Movie banner")]),r("input",{staticClass:"form-control",attrs:{type:"url",id:"bannerControlInput",name:"movie_banner",placeholder:"Banner URL",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"releaseDateControlInput"}},[t._v("Release Year")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"releaseDateControlInput",name:"release_date",placeholder:"Enter release date",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"ratingControlInput"}},[t._v("Rotten Tomatoes Score")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"ratingControlInput",name:"rt_score",placeholder:"Enter Rotten Tomatoes Score",required:""}})])}],k=(r("159b"),r("e9c4"),{name:"FilmAddPopup",data:function(){return{scrolled:0,confirmSuccess:!1}},methods:{postNewFilm:function(){var t,e=this,r=new FormData(document.getElementById("addFilmForm")),a={},i=!0;r.forEach((function(t,e){t||(i=!1),a[e]=t})),i?(d.a.post((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).API_URL)&&void 0!==t?t:"")+"/api/films",JSON.stringify(a)).then((function(){e.confirmSuccess=!0})),document.getElementById("addFilmForm").reset(),this.$emit("onPost")):alert("Missing fields")}},emits:["onPost"]}),q=k,B=Object(b["a"])(q,L,N,!1,null,"02e697a8",null),U=B.exports,Z={DIR_ASC:"Director A-Z",DIR_DESC:"Director Z-A",TITLE_ASC:"Title A-Z",TITLE_DESC:"Title Z-A",DATE_ASC:"Older",DATE_DESC:"Newer"},J={name:"FilmList",components:{FilmAddPopup:U,ListFilter:R,FilmPreview:O},methods:{updateSort:function(t){t===Z.DIR_ASC?this.films.sort((function(t,e){var r=t.director,a=e.director;return r>a})):t===Z.DIR_DESC?this.films.sort((function(t,e){var r=t.director,a=e.director;return r<a})):t===Z.TITLE_ASC?this.films.sort((function(t,e){var r=t.title,a=e.title;return r>a})):t===Z.TITLE_DESC?this.films.sort((function(t,e){var r=t.title,a=e.title;return r<a})):t===Z.DATE_ASC?this.films.sort((function(t,e){var r=t.release_date,a=e.release_date;return r>a})):t===Z.DATE_DESC&&this.films.sort((function(t,e){var r=t.release_date,a=e.release_date;return r<a}))},updateModal:function(){this.movieAddModal=new x["a"](document.getElementById("add-film-popup"))},showAddMovieModal:function(){console.log(this.movieAddModal.show())},getFilms:function(){var t,e=this;this.films=[],d.a.get((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).API_URL)&&void 0!==t?t:"")+"/api/films",{}).then((function(t){console.log(t.data);var r,a=Object(l["a"])(t.data);try{var i=function(){var t=r.value;e.directorChoices.some((function(e){return e===t.director}))||e.directorChoices.push(t.director),e.films.push(t)};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}))}},data:function(){return{message:"",films:[],titleFilter:"",directorFilter:"",directorChoices:[],sortingChoices:Object.values(Z),movieAddModal:x["a"]}},beforeMount:function(){this.getFilms()},mounted:function(){this.updateModal()},updated:function(){this.updateModal()}},V=J,H=Object(b["a"])(V,s,n,!1,null,"0e0da8e6",null),Y=H.exports,z={name:"App",components:{FilmList:Y}},G=z,K=(r("034f"),Object(b["a"])(G,i,o,!1,null,null,null)),Q=K.exports;r("cd74"),r("ab8b");r("ed18").config(),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(Q)}}).$mount("#app")},"85ec":function(t,e,r){},eaf1:function(t,e,r){}});
//# sourceMappingURL=app.306e1059.js.map