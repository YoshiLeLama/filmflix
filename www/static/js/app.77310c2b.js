(function(t){function e(e){for(var r,s,n=e[0],l=e[1],c=e[2],d=0,m=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},i={app:0},o=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"23b3":function(t,e,a){"use strict";a("c714")},"24f3":function(t,e,a){"use strict";a("e0c6")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("p",{staticClass:"fs-2"},[t._v("Filmflix")]),a("FilmList")],1)},o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-75 mx-auto m-3"},[a("FilmAddPopup",{attrs:{id:"add-film-popup"},on:{onPost:t.getFilms}}),a("div",{staticClass:"d-flex justify-content-end flex-wrap align-items-baseline"},[a("button",{staticClass:"btn btn-primary me-3",attrs:{type:"button",id:"refreshButton"},on:{click:t.showAddMovieModal,mouseenter:function(e){t.growPlusButton=!0},mouseleave:function(e){t.growPlusButton=!1}}},[a("i",{staticClass:"bi bi-plus-circle"}),t._v(" Add movie ")]),a("button",{staticClass:"btn btn-outline-primary me-3 mt-1",attrs:{type:"button"},on:{click:t.getFilms,mouseenter:function(e){t.rotateRefresh=!0},mouseleave:function(e){t.rotateRefresh=!1}}},[a("div",{class:{rotate:t.rotateRefresh}},[a("i",{staticClass:"bi bi-arrow-clockwise"})])])]),a("ListFilter",{attrs:{director_choices:t.directorChoices,sorting_choices:t.sortingChoices},on:{titleFilterChange:function(e){t.titleFilter=e},directorFilterChange:function(e){t.directorFilter=e},sortingChange:function(e){return t.updateSort(e)}}}),a("div",{staticClass:"row justify-content-center row-cols-1 row-cols-sm-2 row-cols-xxl-6 row-cols-md-3 row-cols-xl-5 g-2"},t._l(t.films.filter((function(e){var a=e.title,r=e.director;return-1!==a.toLowerCase().search(t.titleFilter.toLowerCase())&&(0===t.directorFilter.length||r===t.directorFilter)})),(function(t){return a("FilmPreview",{key:t.title,attrs:{id:t.id,"movie-data":t}})})),1)],1)},n=[],l=a("b85c"),c=a("1da1"),u=(a("96cf"),a("4e82"),a("07ac"),a("b0c0"),a("bc3a")),d=a.n(u),m=a("7b17"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade"},[a("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[a("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v("Add Movie")]),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),a("div",{staticClass:"modal-body",on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[t.confirmSuccess?a("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" The movie has been successfully added. ")]):t._e(),a("form",{attrs:{id:"addFilmForm"},on:{submit:function(e){return e.preventDefault(),t.postNewFilm.apply(null,arguments)}}},[t._m(0),t._m(1),t._m(2),t._m(3),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"imageControlInput"}},[t._v("Movie poster")]),a("input",{staticClass:"form-control",attrs:{type:"url",id:"imageControlInput",name:"poster",placeholder:"Poster URL",required:""},on:{input:t.changePreviewURL}}),t.isImageInputEmpty?t._e():a("div",{staticClass:"accordion accordion-flush border border-top-0",attrs:{id:"imagePreviewAccordion"}},[a("div",{staticClass:"accordion-item"},[t._m(4),a("div",{staticClass:"accordion-collapse collapse",attrs:{id:"flush-collapseOne","aria-labelledby":"flush-headingOne","data-bs-parent":"#imagePreviewAccordion"}},[t.imagePreviewURL.length>0?a("img",{staticClass:"img-fluid w-75",attrs:{src:t.imagePreviewURL,alt:"Image Preview",draggable:"false"}}):a("p",{staticClass:"p-2 m-0"},[t._v("Enter a valid url")])])])])]),t._m(5),t._m(6),t._m(7)])])])])])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"titleControlInput"}},[t._v("Title")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"titleControlInput",name:"title",placeholder:"Enter movie title",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"originalTitleControlInput"}},[t._v("Original title")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"originalTitleControlInput",name:"original_title",placeholder:"Enter movie original title",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"directorControlInput"}},[t._v("Director")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"directorControlInput",name:"director",placeholder:"Enter director's name",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"descriptionControlTextArea"}},[t._v("Description")]),a("textarea",{staticClass:"form-control",attrs:{id:"descriptionControlTextArea",rows:"3",placeholder:"Enter movie description",name:"description",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"accordion-header",attrs:{id:"flush-headingOne"}},[a("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"}},[t._v(" View image preview ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"releaseDateControlInput"}},[t._v("Release Year")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"releaseDateControlInput",name:"release_date",placeholder:"Enter release date",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"ratingControlInput"}},[t._v("Rotten Tomatoes Score")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"ratingControlInput",name:"rt_score",placeholder:"Enter Rotten Tomatoes Score",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Add Movie")])])}],v=(a("d3b7"),a("159b"),a("e9c4"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),{name:"FilmAddPopup",data:function(){return{scrolled:0,confirmSuccess:!1,imagePreviewURL:"",tooltip:Object,isImageInputEmpty:!0}},mounted:function(){},updated:function(){},methods:{postNewFilm:function(){var t,e=this,a=new FormData(document.getElementById("addFilmForm")),r={},i=!0;a.forEach((function(t,e){t||(i=!1),r[e]=t})),i?(d.a.post((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL)&&void 0!==t?t:"")+"/api/films/",JSON.stringify(r)).then((function(){e.confirmSuccess=!0})),document.getElementById("addFilmForm").reset(),this.$emit("onPost")):alert("Missing fields")},isValidHttpUrl:function(t){var e;try{e=new URL(t)}catch(a){return!1}return"http:"===e.protocol||"https:"===e.protocol},changePreviewURL:function(){var t=this,e=document.getElementById("imageControlInput").value;this.isImageInputEmpty=0===e.length,this.isValidHttpUrl(e)&&d.a.get(e).then((function(a){t.imagePreviewURL=404===a.status?"":e}))}},emits:["onPost"]}),h=v,b=a("2877"),_=Object(b["a"])(h,p,f,!1,null,"346adb4a",null),g=_.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"d-flex flex-row-reverse flex-wrap p-3",attrs:{action:"#"}},[a("div",{staticClass:"col-auto ms-3 mt-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control position-relative end-0",attrs:{type:"text",id:"inputTitle",placeholder:"Filter titles"},domProps:{value:t.titleFilter},on:{input:[function(e){e.target.composing||(t.titleFilter=e.target.value)},function(e){return t.$emit("titleFilterChange",t.titleFilter)}]}})]),a("div",{staticClass:"col-auto ms-3 mt-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.directorChoice,expression:"directorChoice"}],staticClass:"form-select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.directorChoice=e.target.multiple?a:a[0]},function(e){return t.$emit("directorFilterChange",t.directorChoice)}]}},[a("option",{attrs:{value:""}},[t._v("Filter by director...")]),t._l(t.director_choices,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]),a("div",{staticClass:"col-auto ms-3 mt-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortingChoice,expression:"sortingChoice"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortingChoice=e.target.multiple?a:a[0]},function(e){return t.$emit("sortingChange",t.sortingChoice)}]}},[a("option",{attrs:{value:""}},[t._v("Sort by...")]),t._l(t.sorting_choices,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])])},y=[],w={name:"ListFilter",data:function(){return{titleFilter:"",directorChoice:"",sortingChoice:""}},props:{director_choices:Array,sorting_choices:Array},emits:["titleFilterChange","directorFilterChange","sortingChange"]},E=w,x=Object(b["a"])(E,C,y,!1,null,"5298c0d1",null),F=x.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col no-select"},[a("FilmDetailsPopup",{attrs:{id:t.id,"movie-data":t.movieData}}),a("div",{staticClass:"card shadow"},[a("img",{staticClass:"card-img-top",attrs:{alt:"Banner",src:t.movieData.poster,draggable:"false"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(t.movieData.title))]),a("p",{staticClass:"fs-6"},[t._v(t._s(t.movieData.director)+" Â· "+t._s(t.movieData.release_date))]),a("button",{staticClass:"btn btn-primary position-relative",on:{click:function(e){return t.modal.show()}}},[t._v("View more details ")])]),a("div",{staticClass:"card-footer text-muted"},[a("p",{staticClass:"fs-6 m-0"},[t._v("Rating : "),a("StarRating",{attrs:{max_stars:5,rating:parseInt(t.movieData.rt_score)}})],1)])])],1)},P=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade"},[a("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100 w-75"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[a("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v(t._s(t.movieData.title)+" "),a("span",{staticClass:"badge rounded-pill bg-secondary align-baseline"},[t._v(t._s(t.movieData.release_date))])])]),a("div",{staticClass:"modal-body",attrs:{id:"popupBody"},on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[a("p",{staticClass:"fs-6 text-start w-75"},[t._v(t._s(t.movieData.original_title))]),a("StarRating",{staticClass:"position-absolute top-0 end-0 m-3",attrs:{rating:parseInt(t.movieData.rt_score),max_stars:5}}),a("img",{staticClass:"w-100 rounded",attrs:{alt:"Film image",src:t.movieData.poster},on:{dragstart:function(t){t.preventDefault()}}}),a("p",{staticClass:"fs-4 mt-3 fw-bold text-start"},[t._v(t._s(t.movieData.director))]),a("p",{staticClass:"fs-6 m-4"},[t._v(t._s(t.movieData.description))]),t.showCopySuccess?a("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Data has been copied to clipboard. ")]):t._e(),a("div",{staticClass:"d-flex align-content-start"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button",id:"copyButton","data-toggle":"tooltip","data-bs-placement":"right",title:"Copy data to clipboard"},on:{click:t.dataToClip}},[a("i",{staticClass:"bi bi-clipboard"})])])],1),a("div",{staticClass:"modal-footer justify-content-center"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){t.scrolled=!1}}},[t._v(" Close ")])])])])])},O=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{title:t.rating.toString().concat("/100")}},[t._l(Math.floor(t.rating/(100/t.max_stars)),(function(t){return a("i",{key:t,staticClass:"bi bi-star-fill"})})),t.rating/t.max_stars-Math.floor(t.rating/t.max_stars)<50/t.max_stars&&t.rating%100?a("i",{staticClass:"bi bi-star-half"}):t._e(),t._l(Math.floor((100-t.rating)/(100/t.max_stars)),(function(t){return a("i",{key:t+5,staticClass:"bi bi-star"})}))],2)},I=[],T=(a("a9e3"),{name:"StarRating",props:{rating:Number,max_stars:Number}}),R=T,j=Object(b["a"])(R,S,I,!1,null,"556ba7a4",null),L=j.exports,M={name:"FilmDetailsPopup",components:{StarRating:L},data:function(){return{scrolled:!1,showCopySuccess:!1,copyButtonTooltip:m["b"],copyTimeout:null}},props:{movieData:Object},mounted:function(){this.copyButtonTooltip=new m["b"](document.getElementById("copyButton"))},updated:function(){this.copyButtonTooltip=new m["b"](document.getElementById("copyButton"))},methods:{dataToClip:function(){var t=this;clearTimeout(this.copyTimeout),this.copyButtonTooltip.hide(),navigator.clipboard.writeText(JSON.stringify(this.movieData,null,"\t")),this.showCopySuccess=!0,this.copyTimeout=setTimeout((function(){return t.showCopySuccess=!1}),5e3)}},computed:{toHours:function(t){var e=Math.floor(t/60),a=t%60;return e+"h"+a}}},B=M,k=Object(b["a"])(B,A,O,!1,null,"8acb475a",null),$=k.exports,U={name:"FilmPreview",components:{StarRating:L,FilmDetailsPopup:$},data:function(){return{showDetails:!1,modal:null,activateFlip:!0}},props:{id:String,movieData:Object},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.updateModal();case 1:case"end":return e.stop()}}),e)})))()},updated:function(){this.updateModal()},methods:{updateModal:function(){this.modal=new m["a"](document.getElementById(this.id))}}},N=U,V=(a("24f3"),Object(b["a"])(N,D,P,!1,null,"3180ed94",null)),q=V.exports,J={DIR_ASC:"Director A-Z",DIR_DESC:"Director Z-A",TITLE_ASC:"Title A-Z",TITLE_DESC:"Title Z-A",DATE_ASC:"Older",DATE_DESC:"Newer"},Z={name:"FilmList",components:{FilmAddPopup:g,ListFilter:F,FilmPreview:q},methods:{updateSort:function(t){t===J.DIR_ASC?this.films.sort((function(t,e){var a=t.director,r=e.director;return a>r})):t===J.DIR_DESC?this.films.sort((function(t,e){var a=t.director,r=e.director;return a<r})):t===J.TITLE_ASC?this.films.sort((function(t,e){var a=t.title,r=e.title;return a>r})):t===J.TITLE_DESC?this.films.sort((function(t,e){var a=t.title,r=e.title;return a<r})):t===J.DATE_ASC?this.films.sort((function(t,e){var a=t.release_date,r=e.release_date;return a>r})):t===J.DATE_DESC&&this.films.sort((function(t,e){var a=t.release_date,r=e.release_date;return a<r}))},updateModal:function(){this.movieAddModal=new m["a"](document.getElementById("add-film-popup"))},showAddMovieModal:function(){console.log(this.movieAddModal.show())},getFilms:function(){var t,e=this;this.films=[],this.directorChoices=[];var a={};d.a.get((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL)&&void 0!==t?t:"")+"/api/films/",{}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var i,o,s,n,c,u,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=r.data,o=Object(l["a"])(i),t.prev=2,o.s();case 4:if((s=o.n()).done){t.next=14;break}if(n=s.value,a[n.director]){t.next=10;break}return t.next=9,d.a.get(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL+"/api/directors/"+n.director);case 9:a[n.director]=t.sent.data.name;case 10:n.director=a[n.director],e.films.push(n);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:for(c=0,u=Object.values(a);c<u.length;c++)m=u[c],e.directorChoices.push(m);case 23:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.error("eee",t)}))}},data:function(){return{message:"",films:[],titleFilter:"",directorFilter:"",directorChoices:[],sortingChoices:Object.values(J),movieAddModal:m["a"],rotateRefresh:!1,growPlusButton:!1}},beforeMount:function(){this.getFilms()},mounted:function(){this.updateModal()},updated:function(){this.updateModal()}},H=Z,Y=(a("23b3"),Object(b["a"])(H,s,n,!1,null,"fa45062c",null)),z=Y.exports,G={name:"App",components:{FilmList:z}},K=G,Q=(a("034f"),Object(b["a"])(K,i,o,!1,null,null,null)),W=Q.exports;a("cd74"),a("ab8b");r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(W)}}).$mount("#app")},"85ec":function(t,e,a){},c714:function(t,e,a){},e0c6:function(t,e,a){}});
//# sourceMappingURL=app.77310c2b.js.map