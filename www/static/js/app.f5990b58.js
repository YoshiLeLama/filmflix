(function(t){function e(e){for(var i,n,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],i=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=r[0]))}return t}var i={},a={app:0},o=[];function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"276a":function(t,e,r){"use strict";r("9e4d")},"333e":function(t,e,r){"use strict";r("431c")},"431c":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("p",{staticClass:"fs-2"},[t._v("Filmflix")]),r("FilmList")],1)},o=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-75 mx-auto m-3"},[r("div",{staticClass:"d-flex justify-content-end flex-wrap align-items-baseline"},[r("button",{staticClass:"btn btn-outline-primary me-3 mt-1",attrs:{type:"button"},on:{click:t.getFilms,mouseenter:function(e){t.rotateRefresh=!0},mouseleave:function(e){t.rotateRefresh=!1}}},[r("div",{class:{rotate:t.rotateRefresh}},[r("i",{staticClass:"bi bi-arrow-clockwise"})])])]),r("ListFilter",{attrs:{director_choices:t.directorChoices,sorting_choices:t.sortingChoices},on:{titleFilterChange:function(e){t.titleFilter=e},directorFilterChange:function(e){t.directorFilter=e},sortingChange:function(e){return t.updateSort(e)}}}),r("div",{staticClass:"row justify-content-center row-cols-1 row-cols-sm-2 row-cols-xxl-6 row-cols-md-3 row-cols-xl-5 g-2"},t._l(t.films.filter((function(e){var r=e.title,i=e.director;return-1!==r.toLowerCase().search(t.titleFilter.toLowerCase())&&(0===t.directorFilter.length||i===t.directorFilter)})),(function(t){return r("FilmPreview",{key:t.title,attrs:{id:t.id,"movie-data":t}})})),1)],1)},s=[],c=r("b85c"),l=r("1da1"),u=(r("96cf"),r("4e82"),r("07ac"),r("b0c0"),r("bc3a")),d=r.n(u),p=r("7b17"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"d-flex flex-row-reverse flex-wrap p-3",attrs:{action:"#"}},[r("div",{staticClass:"col-auto ms-3 mt-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control position-relative end-0",attrs:{type:"text",id:"inputTitle",placeholder:"Filter titles"},domProps:{value:t.titleFilter},on:{input:[function(e){e.target.composing||(t.titleFilter=e.target.value)},function(e){return t.$emit("titleFilterChange",t.titleFilter)}]}})]),r("div",{staticClass:"col-auto ms-3 mt-1"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.directorChoice,expression:"directorChoice"}],staticClass:"form-select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.directorChoice=e.target.multiple?r:r[0]},function(e){return t.$emit("directorFilterChange",t.directorChoice)}]}},[r("option",{attrs:{value:""}},[t._v("Filter by director...")]),t._l(t.director_choices,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]),r("div",{staticClass:"col-auto ms-3 mt-1"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.sortingChoice,expression:"sortingChoice"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortingChoice=e.target.multiple?r:r[0]},function(e){return t.$emit("sortingChange",t.sortingChoice)}]}},[r("option",{attrs:{value:""}},[t._v("Sort by...")]),t._l(t.sorting_choices,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])])},m=[],v={name:"ListFilter",data:function(){return{titleFilter:"",directorChoice:"",sortingChoice:""}},props:{director_choices:Array,sorting_choices:Array},emits:["titleFilterChange","directorFilterChange","sortingChange"]},h=v,_=r("2877"),b=Object(_["a"])(h,f,m,!1,null,"5298c0d1",null),g=b.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col no-select"},[r("FilmDetailsPopup",{attrs:{id:t.id,"movie-data":t.movieData}}),r("div",{staticClass:"card shadow"},[r("img",{staticClass:"card-img-top",attrs:{alt:"Banner",src:t.movieData.poster,draggable:"false"}}),r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.movieData.title))]),r("div",{staticClass:"m-2"},[t._l(t.movieData.directors,(function(e){return r("span",{key:e,staticClass:"fs-6"},[t._v(t._s(e)+" Â· ")])})),r("span",[t._v(" "+t._s(t.movieData.release_date))])],2),r("button",{staticClass:"btn btn-primary position-relative",on:{click:function(e){return t.modal.show()}}},[t._v("View more details ")])]),r("div",{staticClass:"card-footer text-muted"},[r("p",{staticClass:"fs-6 m-0"},[t._v("Rating : "),r("StarRating",{attrs:{max_stars:5,rating:parseInt(t.movieData.rt_score)}})],1)])])],1)},y=[],w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal fade"},[r("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100 w-75"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[r("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v(t._s(t.movieData.title)+" "),r("span",{staticClass:"badge rounded-pill bg-secondary align-baseline"},[t._v(t._s(t.movieData.release_date))])])]),r("div",{staticClass:"modal-body",attrs:{id:"popupBody"},on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[r("p",{staticClass:"fs-6 text-start w-75"},[t._v(t._s(t.movieData.original_title))]),r("StarRating",{staticClass:"position-absolute top-0 end-0 m-3",attrs:{rating:parseInt(t.movieData.rt_score),max_stars:5}}),r("img",{staticClass:"w-100 rounded",attrs:{alt:"Film image",src:t.movieData.poster},on:{dragstart:function(t){t.preventDefault()}}}),r("div",t._l(t.movieData.directors,(function(e){return r("p",{key:e,staticClass:"fs-4 mt-3 fw-bold text-start"},[t._v(t._s(e))])})),0),r("p",{staticClass:"fs-6 m-4"},[t._v(t._s(t.movieData.description))]),t.showCopySuccess?r("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Data has been copied to clipboard. ")]):t._e(),r("div",{staticClass:"d-flex align-content-start"},[r("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button",id:"copyButton","data-toggle":"tooltip","data-bs-placement":"right",title:"Copy data to clipboard"},on:{click:t.dataToClip}},[r("i",{staticClass:"bi bi-clipboard"})])])],1),r("div",{staticClass:"modal-footer justify-content-center"},[r("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){t.scrolled=!1}}},[t._v(" Close ")])])])])])},x=[],D=(r("e9c4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{attrs:{title:t.rating.toString().concat("/100")}},[t._l(Math.floor(t.rating/(100/t.max_stars)),(function(t){return r("i",{key:t,staticClass:"bi bi-star-fill"})})),t.rating/t.max_stars-Math.floor(t.rating/t.max_stars)<50/t.max_stars&&t.rating%100?r("i",{staticClass:"bi bi-star-half"}):t._e(),t._l(Math.floor((100-t.rating)/(100/t.max_stars)),(function(t){return r("i",{key:t+5,staticClass:"bi bi-star"})}))],2)}),F=[],S=(r("a9e3"),{name:"StarRating",props:{rating:Number,max_stars:Number}}),E=S,O=Object(_["a"])(E,D,F,!1,null,"556ba7a4",null),T=O.exports,j={name:"FilmDetailsPopup",components:{StarRating:T},data:function(){return{scrolled:!1,showCopySuccess:!1,copyButtonTooltip:p["b"],copyTimeout:null}},props:{movieData:Object},mounted:function(){this.copyButtonTooltip=new p["b"](document.getElementById("copyButton"))},updated:function(){this.copyButtonTooltip=new p["b"](document.getElementById("copyButton"))},methods:{dataToClip:function(){var t=this;clearTimeout(this.copyTimeout),this.copyButtonTooltip.hide(),navigator.clipboard.writeText(JSON.stringify(this.movieData,null,"\t")),this.showCopySuccess=!0,this.copyTimeout=setTimeout((function(){return t.showCopySuccess=!1}),5e3)}},computed:{toHours:function(t){var e=Math.floor(t/60),r=t%60;return e+"h"+r}}},A=j,k=Object(_["a"])(A,w,x,!1,null,"4b19adc0",null),P=k.exports,R={name:"FilmPreview",components:{StarRating:T,FilmDetailsPopup:P},data:function(){return{showDetails:!1,modal:null,activateFlip:!0}},props:{id:String,movieData:Object},mounted:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.updateModal();case 1:case"end":return e.stop()}}),e)})))()},updated:function(){this.updateModal()},methods:{updateModal:function(){this.modal=new p["a"](document.getElementById(this.id))}}},M=R,L=(r("276a"),Object(_["a"])(M,C,y,!1,null,"b1df7692",null)),B=L.exports,I={DIR_ASC:"Director A-Z",DIR_DESC:"Director Z-A",TITLE_ASC:"Title A-Z",TITLE_DESC:"Title Z-A",DATE_ASC:"Older",DATE_DESC:"Newer"},N={name:"FilmList",components:{ListFilter:g,FilmPreview:B},methods:{updateSort:function(t){t===I.DIR_ASC?this.films.sort((function(t,e){var r=t.director,i=e.director;return r>i})):t===I.DIR_DESC?this.films.sort((function(t,e){var r=t.director,i=e.director;return r<i})):t===I.TITLE_ASC?this.films.sort((function(t,e){var r=t.title,i=e.title;return r>i})):t===I.TITLE_DESC?this.films.sort((function(t,e){var r=t.title,i=e.title;return r<i})):t===I.DATE_ASC?this.films.sort((function(t,e){var r=t.release_date,i=e.release_date;return r>i})):t===I.DATE_DESC&&this.films.sort((function(t,e){var r=t.release_date,i=e.release_date;return r<i}))},updateModal:function(){},showAddMovieModal:function(){console.log(this.movieAddModal.show())},getFilms:function(){var t,e=this;this.films=[],this.directorChoices=[];var r={};d.a.get((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL)&&void 0!==t?t:"")+"/api/films/",{}).then(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(i){var a,o,n,s,l,u,p,f,m,v,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=i.data,o=Object(c["a"])(a),t.prev=2,o.s();case 4:if((n=o.n()).done){t.next=30;break}s=n.value,l=0,u=Object(c["a"])(s.directors),t.prev=8,u.s();case 10:if((p=u.n()).done){t.next=20;break}return f=p.value,t.next=14,d.a.get(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL+"/api/directors/"+f);case 14:r[f]=t.sent.data.name,s.directors[l]=r[f],e.films.push(s),++l;case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](8),u.e(t.t0);case 25:return t.prev=25,u.f(),t.finish(25);case 28:t.next=4;break;case 30:t.next=35;break;case 32:t.prev=32,t.t1=t["catch"](2),o.e(t.t1);case 35:return t.prev=35,o.f(),t.finish(35);case 38:for(m=0,v=Object.values(r);m<v.length;m++)h=v[m],e.directorChoices.push(h);case 39:case"end":return t.stop()}}),t,null,[[2,32,35,38],[8,22,25,28]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.error("eee",t)}))}},data:function(){return{message:"",films:[],titleFilter:"",directorFilter:"",directorChoices:[],sortingChoices:Object.values(I),movieAddModal:p["a"],rotateRefresh:!1,growPlusButton:!1}},beforeMount:function(){this.getFilms()},mounted:function(){this.updateModal()},updated:function(){this.updateModal()}},$=N,U=(r("333e"),Object(_["a"])($,n,s,!1,null,"013acf9c",null)),V=U.exports,Z={name:"App",components:{FilmList:V}},J=Z,H=(r("034f"),Object(_["a"])(J,a,o,!1,null,null,null)),q=H.exports;r("cd74"),r("ab8b");i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(q)}}).$mount("#app")},"85ec":function(t,e,r){},"9e4d":function(t,e,r){}});
//# sourceMappingURL=app.f5990b58.js.map