(function(t){function e(e){for(var a,n,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},r={app:0},o=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"276a":function(t,e,i){"use strict";i("9e4d")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("p",{staticClass:"fs-2"},[t._v("Filmflix")]),i("FilmList")],1)},o=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-75 mx-auto m-3"},[i("div",{staticClass:"d-flex justify-content-end flex-wrap align-items-baseline"},[i("button",{staticClass:"btn btn-outline-primary me-3 mt-1",attrs:{type:"button"},on:{click:t.getFilms,mouseenter:function(e){t.rotateRefresh=!0},mouseleave:function(e){t.rotateRefresh=!1}}},[i("div",{class:{rotate:t.rotateRefresh}},[i("i",{staticClass:"bi bi-arrow-clockwise"})])])]),i("ListFilter",{attrs:{director_choices:t.directorChoices,sorting_choices:t.sortingChoices},on:{titleFilterChange:function(e){t.titleFilter=e},directorFilterChange:function(e){t.directorFilter=e},sortingChange:function(e){return t.updateSort(e)}}}),i("div",{staticClass:"row justify-content-center row-cols-1 row-cols-sm-2 row-cols-xxl-6 row-cols-md-3 row-cols-xl-5 g-2"},t._l(t.films.filter((function(e){var i=e.title,a=e.directors;return-1!==i.toLowerCase().search(t.titleFilter.toLowerCase())&&(0===t.directorFilter.length||a.find((function(e){return e===t.directorFilter})))})),(function(t){return i("FilmPreview",{key:t.title,attrs:{id:t.id,"movie-data":t}})})),1)],1)},s=[],l=i("b85c"),c=i("1da1"),u=(i("96cf"),i("4e82"),i("07ac"),i("b0c0"),i("bc3a")),d=i.n(u),p=i("7b17"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"d-flex flex-row-reverse flex-wrap p-3",attrs:{action:"#"}},[i("div",{staticClass:"col-auto ms-3 mt-1"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"form-control position-relative end-0",attrs:{type:"text",id:"inputTitle",placeholder:"Filter titles"},domProps:{value:t.titleFilter},on:{input:[function(e){e.target.composing||(t.titleFilter=e.target.value)},function(e){return t.$emit("titleFilterChange",t.titleFilter)}]}})]),i("div",{staticClass:"col-auto ms-3 mt-1"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.directorChoice,expression:"directorChoice"}],staticClass:"form-select",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.directorChoice=e.target.multiple?i:i[0]},function(e){return t.$emit("directorFilterChange",t.directorChoice)}]}},[i("option",{attrs:{value:""}},[t._v("Filter by director...")]),t._l(t.director_choices,(function(e){return i("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)]),i("div",{staticClass:"col-auto ms-3 mt-1"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.sortingChoice,expression:"sortingChoice"}],staticClass:"form-control",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortingChoice=e.target.multiple?i:i[0]},function(e){return t.$emit("sortingChange",t.sortingChoice)}]}},[i("option",{attrs:{value:""}},[t._v("Sort by...")]),t._l(t.sorting_choices,(function(e){return i("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])])},m=[],v={name:"ListFilter",data:function(){return{titleFilter:"",directorChoice:"",sortingChoice:""}},props:{director_choices:Array,sorting_choices:Array},emits:["titleFilterChange","directorFilterChange","sortingChange"]},h=v,b=i("2877"),g=Object(b["a"])(h,f,m,!1,null,"5298c0d1",null),_=g.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col no-select"},[i("FilmDetailsPopup",{attrs:{id:t.id,"movie-data":t.movieData}}),i("div",{staticClass:"card shadow"},[i("img",{staticClass:"card-img-top",attrs:{alt:"Banner",src:t.movieData.poster,draggable:"false"}}),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.movieData.title))]),i("div",{staticClass:"m-2"},[t._l(t.movieData.directors,(function(e){return i("span",{key:e,staticClass:"fs-6"},[t._v(t._s(e)+" Â· ")])})),i("span",[t._v(" "+t._s(t.movieData.release_date))])],2),i("button",{staticClass:"btn btn-primary position-relative",on:{click:function(e){return t.modal.show()}}},[t._v("View more details ")])]),i("div",{staticClass:"card-footer text-muted"},[i("p",{staticClass:"fs-6 m-0"},[t._v("Rating : "),i("StarRating",{attrs:{max_stars:5,rating:parseInt(t.movieData.rt_score)}})],1)])])],1)},y=[],w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal fade"},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable w-100 w-75"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header container",class:{shadow:t.scrolled}},[i("h5",{staticClass:"modal-title h-100 fw-bolder"},[t._v(t._s(t.movieData.title)+" "),i("span",{staticClass:"badge rounded-pill bg-secondary align-baseline"},[t._v(t._s(t.movieData.release_date))])])]),i("div",{staticClass:"modal-body",attrs:{id:"popupBody"},on:{scroll:function(e){t.scrolled=e.target.scrollTop>0}}},[i("p",{staticClass:"fs-6 text-start w-75"},[t._v(t._s(t.movieData.original_title))]),i("StarRating",{staticClass:"position-absolute top-0 end-0 m-3",attrs:{rating:parseInt(t.movieData.rt_score),max_stars:5}}),i("img",{staticClass:"w-100 rounded",attrs:{alt:"Film image",src:t.movieData.poster},on:{dragstart:function(t){t.preventDefault()}}}),i("div",t._l(t.movieData.directors,(function(e){return i("p",{key:e,staticClass:"fs-4 mt-3 fw-bold text-start"},[t._v(t._s(e))])})),0),i("p",{staticClass:"fs-6 m-4"},[t._v(t._s(t.movieData.description))]),t.showCopySuccess?i("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Data has been copied to clipboard. ")]):t._e(),i("div",{staticClass:"d-flex align-content-start"},[i("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button",id:"copyButton","data-toggle":"tooltip","data-bs-placement":"right",title:"Copy data to clipboard"},on:{click:t.dataToClip}},[i("i",{staticClass:"bi bi-clipboard"})])])],1),i("div",{staticClass:"modal-footer justify-content-center"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){t.scrolled=!1}}},[t._v(" Close ")])])])])])},x=[],F=(i("e9c4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{attrs:{title:t.rating.toString().concat("/100")}},[t._l(Math.floor(t.rating/(100/t.max_stars)),(function(t){return i("i",{key:t,staticClass:"bi bi-star-fill"})})),t.rating/t.max_stars-Math.floor(t.rating/t.max_stars)<50/t.max_stars&&t.rating%100?i("i",{staticClass:"bi bi-star-half"}):t._e(),t._l(Math.floor((100-t.rating)/(100/t.max_stars)),(function(t){return i("i",{key:t+5,staticClass:"bi bi-star"})}))],2)}),D=[],O=(i("a9e3"),{name:"StarRating",props:{rating:Number,max_stars:Number}}),T=O,S=Object(b["a"])(T,F,D,!1,null,"556ba7a4",null),E=S.exports,j={name:"FilmDetailsPopup",components:{StarRating:E},data:function(){return{scrolled:!1,showCopySuccess:!1,copyButtonTooltip:p["b"],copyTimeout:null}},props:{movieData:Object},mounted:function(){this.copyButtonTooltip=new p["b"](document.getElementById("copyButton"))},updated:function(){this.copyButtonTooltip=new p["b"](document.getElementById("copyButton"))},methods:{dataToClip:function(){var t=this;clearTimeout(this.copyTimeout),this.copyButtonTooltip.hide(),navigator.clipboard.writeText(JSON.stringify(this.movieData,null,"\t")),this.showCopySuccess=!0,this.copyTimeout=setTimeout((function(){return t.showCopySuccess=!1}),5e3)}},computed:{toHours:function(t){var e=Math.floor(t/60),i=t%60;return e+"h"+i}}},A=j,k=Object(b["a"])(A,w,x,!1,null,"4b19adc0",null),P=k.exports,M={name:"FilmPreview",components:{StarRating:E,FilmDetailsPopup:P},data:function(){return{showDetails:!1,modal:null,activateFlip:!0}},props:{id:String,movieData:Object},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.updateModal();case 1:case"end":return e.stop()}}),e)})))()},updated:function(){this.updateModal()},methods:{updateModal:function(){this.modal=new p["a"](document.getElementById(this.id))}}},R=M,L=(i("276a"),Object(b["a"])(R,C,y,!1,null,"b1df7692",null)),B=L.exports,I={TITLE_ASC:"Title A-Z",TITLE_DESC:"Title Z-A",DATE_ASC:"Older",DATE_DESC:"Newer"},N={name:"FilmList",components:{ListFilter:_,FilmPreview:B},methods:{updateSort:function(t){t===I.TITLE_ASC?this.films.sort((function(t,e){var i=t.title,a=e.title;return i>a})):t===I.TITLE_DESC?this.films.sort((function(t,e){var i=t.title,a=e.title;return i<a})):t===I.DATE_ASC?this.films.sort((function(t,e){var i=t.release_date,a=e.release_date;return i>a})):t===I.DATE_DESC&&this.films.sort((function(t,e){var i=t.release_date,a=e.release_date;return i<a}))},updateModal:function(){},showAddMovieModal:function(){console.log(this.movieAddModal.show())},getFilms:function(){var t,e=this;this.films=[],this.directorChoices=[];var i={};d.a.get((null!==(t=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL)&&void 0!==t?t:"")+"/api/films/",{}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var r,o,n,s,c,u,p,f,m,v,h,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=a.data,o=Object(l["a"])(r),t.prev=2,o.s();case 4:if((n=o.n()).done){t.next=30;break}s=n.value,c=0,u=Object(l["a"])(s.directors),t.prev=8,u.s();case 10:if((p=u.n()).done){t.next=20;break}return m=p.value,t.next=14,d.a.get((null!==(f=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL)&&void 0!==f?f:"")+"/api/directors/"+m);case 14:i[m]=t.sent.data.name,s.directors[c]=i[m],e.films.push(s),++c;case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](8),u.e(t.t0);case 25:return t.prev=25,u.f(),t.finish(25);case 28:t.next=4;break;case 30:t.next=35;break;case 32:t.prev=32,t.t1=t["catch"](2),o.e(t.t1);case 35:return t.prev=35,o.f(),t.finish(35);case 38:for(v=0,h=Object.values(i);v<h.length;v++)b=h[v],e.directorChoices.push(b);case 39:case"end":return t.stop()}}),t,null,[[2,32,35,38],[8,22,25,28]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.error("eee",t)}))}},data:function(){return{message:"",films:[],titleFilter:"",directorFilter:"",directorChoices:[],sortingChoices:Object.values(I),movieAddModal:p["a"],rotateRefresh:!1,growPlusButton:!1}},beforeMount:function(){this.getFilms()},mounted:function(){this.updateModal()},updated:function(){this.updateModal()}},$=N,U=(i("f1ab"),Object(b["a"])($,n,s,!1,null,"3c1d9d2d",null)),V=U.exports,J={name:"App",components:{FilmList:V}},Z=J,H=(i("034f"),Object(b["a"])(Z,r,o,!1,null,null,null)),q=H.exports;i("cd74"),i("ab8b");a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(q)}}).$mount("#app")},"85ec":function(t,e,i){},"9e4d":function(t,e,i){},bf60:function(t,e,i){},f1ab:function(t,e,i){"use strict";i("bf60")}});
//# sourceMappingURL=app.f6fdfce8.js.map